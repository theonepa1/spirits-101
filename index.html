<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deccan Spirits Cost Analysis Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            height: 100vh;
            background-color: #f8f8f8;
        }
        .container {
            display: flex;
            width: 100%;
        }
        .panel {
            padding: 20px;
            flex: 1;
            overflow-y: auto;
        }
        .left-panel {
            background-color: #ffffff;
            border-right: 2px solid #ccc;
        }
        .right-panel {
            background-color: #f4f4f4;
        }
        h2 {
            margin-bottom: 20px;
            color: #333;
        }
        .compact-row {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 20px;
        }
        .compact-row > div {
            flex: 1;
        }
        input, select {
            width: 100%;
            margin-bottom: 10px;
            padding: 10px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        input[type="range"] {
            width: 85%;
        }
        .output-section {
            background-color: #fff;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .output-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .bold-value {
            font-weight: bold;
            color: #000;
        }
        .slider-value {
            font-weight: bold;
            margin-left: 10px;
        }
        .subsection {
            background-color: #f9f9f9;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Left Panel: Inputs -->
        <div class="panel left-panel">
            <h2>Input Details</h2>
            <div class="subsection">
                <h3>Product Details</h3>
                <div class="compact-row">
                    <div>
                        <label for="type">Type of Spirit:</label>
                        <select id="type">
                            <option value="whiskey">Whiskey</option>
                            <option value="vodka">Vodka</option>
                            <option value="gin">Gin</option>
                            <option value="rum">Rum</option>
                        </select>
                    </div>
                    <div>
                        <label for="cases">Total Number of Cases:</label>
                        <input type="number" id="cases" min="500" max="10000" value="500">
                    </div>
                </div>
            </div>

            <div class="subsection">
                <h3>Cost Inputs</h3>
                <div class="compact-row">
                    <div>
                        <label for="fob">Production Cost (FOB):</label>
                        <input type="range" id="fob" min="30" max="70" value="50">
                        <span class="slider-value" id="fob-slider-value">$50</span>
                    </div>
                    <div>
                        <label for="shipping">Shipping Cost per Case:</label>
                        <input type="range" id="shipping" min="5" max="15" value="7">
                        <span class="slider-value" id="shipping-slider-value">$7</span>
                    </div>
                </div>
                <div class="compact-row">
                    <div>
                        <label for="warehousing">Warehousing Cost per Case:</label>
                        <input type="range" id="warehousing" min="0.5" max="3" value="1">
                        <span class="slider-value" id="warehousing-slider-value">$1</span>
                    </div>
                    <div>
                        <label for="transportation">Transportation Cost per Case:</label>
                        <input type="range" id="transportation" min="1" max="5" value="1.5">
                        <span class="slider-value" id="transportation-slider-value">$1.5</span>
                    </div>
                </div>
                <div>
                    <label for="misc">Miscellaneous Costs:</label>
                    <input type="number" id="misc" value="5000">
                </div>
            </div>

            <div class="subsection">
                <h3>Profit Margins</h3>
                <div class="compact-row">
                    <div>
                        <label for="importer-margin">Importer Margin:</label>
                        <input type="range" id="importer-margin" min="5" max="50" value="20">
                        <span class="slider-value" id="importer-margin-slider-value">20%</span>
                    </div>
                    <div>
                        <label for="distributor-margin">Distributor Margin:</label>
                        <input type="range" id="distributor-margin" min="5" max="50" value="25">
                        <span class="slider-value" id="distributor-margin-slider-value">25%</span>
                    </div>
                </div>
                <div>
                    <label for="retailer-margin">Retailer Margin:</label>
                    <input type="range" id="retailer-margin" min="10" max="50" value="30">
                    <span class="slider-value" id="retailer-margin-slider-value">30%</span>
                </div>
            </div>
        </div>

        <!-- Right Panel: Outputs -->
        <div class="panel right-panel">
            <h2>Output Results</h2>

            <!-- Cost per Case Section -->
            <div class="output-section">
                <p class="output-title">Cost per Case</p>
                <p>Federal Taxes: $<span id="excise-tax">0</span></p>
                <p>CBP Duty: $<span id="cbp-duty">0</span></p>
                <p>Total Cost: $<span id="total-cost">0</span></p>
            </div>

            <!-- Price per Case Section -->
            <div class="output-section">
                <p class="output-title">Price per Case</p>
                <p><b>Importer Selling Price: $<span id="importer-price" class="bold-value">0</span></b></p>
                <p>Distributor Selling Price: $<span id="distributor-price">0</span></p>
                <p>Retailer Shelf Price: $<span id="retail-price">0</span></p>
            </div>

            <!-- Price per Bottle Section -->
            <div class="output-section">
                <p class="output-title">Price per Bottle</p>
                <p>Importer Selling Price: $<span id="importer-price-bottle">0</span></p>
                <p>Distributor Selling Price: $<span id="distributor-price-bottle">0</span></p>
                <p><b>Retailer Shelf Price: $<span id="retail-price-bottle" class="bold-value">0</span></b></p>
            </div>

            <!-- Profit Analysis Section -->
            <div class="output-section">
                <p class="output-title">Profit Analysis</p>
                <p>Importer Profit per Case: $<span id="importer-profit-case">0</span></p>
                <p>Importer Total Profit: $<span id="importer-profit">0</span></p>
            </div>
        </div>
    </div>

    <script>
        const CBP_RATES = { whiskey: 2.06, vodka: 1.78, gin: 2.38, rum: 1.59 };

        function syncInput(sliderId, valueDisplayId) {
            const slider = document.getElementById(sliderId);
            const valueDisplay = document.getElementById(valueDisplayId);

            slider.addEventListener("input", () => {
                valueDisplay.textContent = sliderId.includes("margin") ? slider.value + "%" : `$${slider.value}`;
                calculateResults();
            });
        }

        // Sync sliders
        syncInput("fob", "fob-slider-value");
        syncInput("shipping", "shipping-slider-value");
        syncInput("warehousing", "warehousing-slider-value");
        syncInput("transportation", "transportation-slider-value");
        syncInput("importer-margin", "importer-margin-slider-value");
        syncInput("distributor-margin", "distributor-margin-slider-value");
        syncInput("retailer-margin", "retailer-margin-slider-value");

        function calculateResults() {
            const cases = Number(document.getElementById("cases").value);
            const spiritType = document.getElementById("type").value;
            const fob = Number(document.getElementById("fob").value);
            const shipping = Number(document.getElementById("shipping").value);
            const warehousing = Number(document.getElementById("warehousing").value);
            const transportation = Number(document.getElementById("transportation").value);
            const misc = Number(document.getElementById("misc").value);

            const importerMargin = Number(document.getElementById("importer-margin").value) / 100;
            const distributorMargin = Number(document.getElementById("distributor-margin").value) / 100;
            const retailerMargin = Number(document.getElementById("retailer-margin").value) / 100;

            const proofGallonsPerCase = 2.37753;
            const proofLitersPerCase = proofGallonsPerCase * 3.78541;

            const federalTaxPerCase = proofGallonsPerCase * 2.7; // Federal tax
            const cbpDutyPerCase = proofLitersPerCase * CBP_RATES[spiritType]; // CBP duty

            const baseCost = fob + shipping + warehousing + transportation + (misc / cases);
            const totalCostPerCase = baseCost + federalTaxPerCase + cbpDutyPerCase;

            const importerPrice = totalCostPerCase * (1 + importerMargin);
            const distributorPrice = importerPrice * (1 + distributorMargin);
            const retailPrice = distributorPrice / (1 - retailerMargin);

            const importerPriceBottle = importerPrice / 12;
            const distributorPriceBottle = distributorPrice / 12;
            const retailPriceBottle = retailPrice / 12;

            const importerProfitPerCase = importerPrice - totalCostPerCase;
            const importerTotalProfit = importerProfitPerCase * cases;

            document.getElementById("excise-tax").textContent = federalTaxPerCase.toFixed(2);
            document.getElementById("cbp-duty").textContent = cbpDutyPerCase.toFixed(2);
            document.getElementById("total-cost").textContent = totalCostPerCase.toFixed(2);
            document.getElementById("importer-price").textContent = importerPrice.toFixed(2);
            document.getElementById("distributor-price").textContent = distributorPrice.toFixed(2);
            document.getElementById("retail-price").textContent = retailPrice.toFixed(2);
            document.getElementById("importer-price-bottle").textContent = importerPriceBottle.toFixed(2);
            document.getElementById("distributor-price-bottle").textContent = distributorPriceBottle.toFixed(2);
            document.getElementById("retail-price-bottle").textContent = retailPriceBottle.toFixed(2);
            document.getElementById("importer-profit-case").textContent = importerProfitPerCase.toFixed(2);
            document.getElementById("importer-profit").textContent = importerTotalProfit.toFixed(2);
        }

        document.getElementById("type").addEventListener("change", calculateResults);
        document.getElementById("cases").addEventListener("input", calculateResults);
        document.getElementById("misc").addEventListener("input", calculateResults);

        calculateResults();
    </script>
</body>
</html>
